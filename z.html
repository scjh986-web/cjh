<html lang="zh-CN">
 <head> 
  <style>body {display: none;}</style> 
  <script src="weiyan.js"></script> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>éŸ³ä¹</title> 
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f0ff 100%);
            padding: 40px 20px;
            color: #2c3e50;
            overflow-x: hidden;
            min-height: 100vh;
        }
        /* é¡µé¢æ ‡é¢˜ */
        .page-title {
            text-align: center;
            color: #1e40af;
            font-size: 32px;
            margin-bottom: 40px;
            letter-spacing: 1px;
        }
        /* éŸ³ä¹å®¹å™¨ */
        .music-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(149, 157, 165, 0.1);
            padding: 30px;
            border: 1px solid rgba(114, 183, 255, 0.2);
        }
        /* æ’­æ”¾åˆ—è¡¨ */
        .music-list {
            list-style: none;
            margin-bottom: 30px;
            max-height: 200px;
            overflow-y: auto;
        }
        .music-list li {
            padding: 12px 15px;
            margin-bottom: 8px;
            background-color: #f0f7ff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .music-list li:hover {
            background-color: #e6f0ff;
            border-color: rgba(71, 147, 255, 0.3);
        }
        .music-list li.active {
            background-color: #e6f0ff;
            border-color: #3b82f6;
            color: #1e40af;
            font-weight: 500;
        }
        .music-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 70%;
        }
        .music-duration {
            font-size: 14px;
            color: #4a6fa5;
        }
        /* æ’­æ”¾å™¨æ§åˆ¶åŒºï¼ˆæŒ‰é’®å¤§å°è°ƒæ•´ï¼šå¾ªç¯/ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–48Ã—48pxï¼Œæ’­æ”¾æŒ‰é’®60Ã—60pxï¼‰ */
        .player-controls {
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }
        .control-btns {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .control-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: #3b82f6;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }
        .control-btn:hover {
            background-color: #2563eb;
            transform: scale(1.05);
        }
        .play-btn {
            width: 60px;
            height: 60px;
            font-size: 24px;
        }
        /* è¿›åº¦æ¡ */
        .progress-container {
            width: 100%;
            height: 6px;
            background-color: #e2e8f0;
            border-radius: 3px;
            margin: 0 auto;
            cursor: pointer;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #3b82f6;
            border-radius: 3px;
            transition: width 0.1s linear;
        }
        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #4a6fa5;
            margin-top: 8px;
        }
        /* è¿”å›é¦–é¡µæŒ‰é’® */
        .back-home {
            display: block;
            width: 120px;
            margin: 30px auto 0;
            padding: 10px 20px;
            background-color: #3b82f6;
            color: white;
            border-radius: 6px;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        .back-home:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }
        /* æ— éŸ³ä¹æç¤º */
        .empty-tip {
            text-align: center;
            padding: 20px;
            color: #4a6fa5;
        }
    </style> 
  <script src="js/jq.js"></script> 
 </head> 
 <body id="v1" style="display: block;"> 
  <h1 id="v2" class="page-title">éŸ³ä¹</h1> 
  <div id="v3" class="music-container"> 
   <!-- æœ¬åœ°éŸ³ä¹åˆ—è¡¨ï¼ˆéœ€æ‰‹åŠ¨é…ç½®éŸ³ä¹æ–‡ä»¶è·¯å¾„ï¼‰ --> 
   <ul class="music-list" id="music-list">
    <li data-index="0" class=""> <span class="music-name">Tikolin Purre(å®Œæ•´ç‰ˆ)</span> <span class="music-duration">01:48</span> </li>
    <li data-index="1" class=""> <span class="music-name">å¼€å¾€æ˜¥å¤©çš„åœ°é“</span> <span class="music-duration">05:10</span> </li>
    <li data-index="2" class=""> <span class="music-name">å¯æˆ‘åªæ˜¯æµ·</span> <span class="music-duration">00:24</span> </li>
    <li data-index="3" class="active"> <span class="music-name">æˆ‘ç¦»å¼€äº†åŒ—æ–¹</span> <span class="music-duration">00:12</span> </li>
   </ul> 
   <!-- æ’­æ”¾å™¨æ§åˆ¶ï¼ˆå«å¾ªç¯ã€ä¸Šä¸€é¦–ã€æ’­æ”¾ã€ä¸‹ä¸€é¦–ï¼‰ --> 
   <div id="v4" class="player-controls"> 
    <div id="v5" class="control-btns"> 
     <button id="v6" class="control-btn loop-btn" title="å½“å‰ï¼šåˆ—è¡¨å¾ªç¯ï¼Œç‚¹å‡»åˆ‡æ¢">ğŸ”„</button> 
     <button id="v7" class="control-btn prev-btn">â—€</button> 
     <button id="v8" class="control-btn play-btn">â– </button> 
     <button id="v9" class="control-btn next-btn">â–¶</button> 
    </div> 
    <div class="progress-container" id="progress-container"> 
     <div class="progress-bar" id="progress-bar" style="width: 1.84289%;"></div> 
    </div> 
    <div id="v10" class="time-display"> 
     <span id="current-time">00:00</span> 
     <span id="total-time">00:24</span> 
    </div> 
   </div> 
  </div> 
  <!-- è¿”å›é¦–é¡µæŒ‰é’® --> 
  <a id="v11" href="index.html" class="back-home">è¿”å›é¦–é¡µ</a> 
  <script>
        // 1. é…ç½®æœ¬åœ°éŸ³ä¹ï¼ˆå…³é”®ï¼éœ€å°†éŸ³ä¹æ–‡ä»¶ä¸æœ¬HTMLæ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹ä»¥ä¸‹ä¿¡æ¯ï¼‰
        const localMusics = [
            { title: "ç½—ç”Ÿé—¨+Laideronnette", src: "https://audio.jukehost.co.uk/NRRbALs2zlSEXBLDUe6xLQTI656jweYP" },
            { title: "Tikolin Purre(å®Œæ•´ç‰ˆ)", src: "https://audio.jukehost.co.uk/bNPUZLinSUeDbFBVG6BZtRGC3V6nRMj8" }, // éŸ³ä¹æ–‡ä»¶åä¸º"1.mp3"ï¼Œæ˜¾ç¤ºæ ‡é¢˜è‡ªå®šä¹‰
            { title: "å¼€å¾€æ˜¥å¤©çš„åœ°é“", src: "https://audio.jukehost.co.uk/xPF8kXt11lpdYjESuJ91G0aCs8DRRKg3" }, // ç¤ºä¾‹ï¼šæ–‡ä»¶åä¸º"æ™´å¤©.mp3"
            { title: "å¯æˆ‘åªæ˜¯æµ·", src: "https://audio.jukehost.co.uk/p4Xz3DPvj7xZHCanTWfsSOiD9rXRMe8u" }, // æ”¯æŒMP3ã€FLACã€WAVç­‰æ ¼å¼
            { title: "æˆ‘ç¦»å¼€äº†åŒ—æ–¹", src: "https://audio.jukehost.co.uk/7DU81TGOSSWtPzNkICGCzVGBVvnzX1dC" },
            { title: "çº¯éŸ³ä¹", src: "https://audio.jukehost.co.uk/CbxiQzllFo1JrlBEG6rGj5wETtQEXgfS" },
            { title: "è½¬èº«ç¦»å¼€", src: "https://audio.jukehost.co.uk/RnRY7SBMqYN7eKo5zm9ldPir0EtUuOf6" },
            { title: "4.55", src: "https://audio.jukehost.co.uk/qS1WdNgOymFDdoaG71E4MsHwIyTR9A5T" },
            { title: "Savage Love", src: "https://audio.jukehost.co.uk/4cpT2il2kiEAYqRPEgTuzo7m1DCLo8ZE" },
            { title: "æ²‰æºº", src: "https://audio.jukehost.co.uk/J20KmhLH9m66PThKiwXOEOcyJmcIg3VP" },
            { title: "æˆ‘å·²ç»ç‰µä½ æ‰‹", src: "https://audio.jukehost.co.uk/WjmKFTK3go3AXfnGXVmh4jSeYhGtK71h" },
            { title: "æ­¦å®¶å¡", src: "https://audio.jukehost.co.uk/rBQqWST2aQNn3fxAqNTRVy8DewVlc4Th" },
            { title: "å¿ƒå¦‚æ­¢æ°´", src: "https://audio.jukehost.co.uk/GqRYNrT2pkg7EYvcfcwjWCUfsGIDsMHz" },
            { title: "ç»ˆäº", src: "https://audio.jukehost.co.uk/8tomXKBfn17ebxmiBBGPgBnY6QniJd0P" },
            { title: "æ™´å¤©(ä»å‰æœ‰äººçˆ±ä½ å¾ˆä¹…)", src: "https://audio.jukehost.co.uk/b1iDoPgddrCxI89xAB5pwMnSMPEYwvU3" },
            { title: "æ­Œæ›²1", src: "https://audio.jukehost.co.uk/RTHgobHOJn2qxbljcktBXcmpDml2iWfg" },
            { title: "æ­Œæ›²2", src: "https://audio.jukehost.co.uk/JxFObG9UdNDICloJwP9LO5Ubt8wFQ4VO" },
            // å¯ç»§ç»­æ·»åŠ æ›´å¤šæœ¬åœ°éŸ³ä¹ï¼Œæ ¼å¼ï¼š{ title: "æ­Œæ›²å - æ­Œæ‰‹", src: "éŸ³ä¹æ–‡ä»¶å.æ ¼å¼" }
        ];

        // æ ¸å¿ƒå˜é‡
        const audioElement = new Audio();
        const musicListEl = document.getElementById('music-list');
        const playBtn = document.querySelector('.play-btn');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');
        const loopBtn = document.querySelector('.loop-btn');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeDisplay = document.getElementById('current-time');
        const totalTimeDisplay = document.getElementById('total-time');
        let currentMusicIndex = 0;
        let loopMode = 'list'; // å¾ªç¯æ¨¡å¼ï¼šlistï¼ˆåˆ—è¡¨ï¼‰ã€singleï¼ˆå•æ›²ï¼‰ã€randomï¼ˆéšæœºï¼‰
        let durationListener = null; // ä¿®å¤æ—¶é•¿æ˜¾ç¤ºçš„ç›‘å¬æ ‡è¯†

        // é¡µé¢åŠ è½½æ—¶æ¸²æŸ“éŸ³ä¹åˆ—è¡¨
        window.addEventListener('DOMContentLoaded', () => {
            renderMusicList();
            // åŠ è½½ç¬¬ä¸€é¦–éŸ³ä¹ï¼ˆé»˜è®¤ä¸è‡ªåŠ¨æ’­æ”¾ï¼Œéœ€ç‚¹å‡»æ’­æ”¾æŒ‰é’®ï¼‰
            if (localMusics.length > 0) {
                loadMusic(currentMusicIndex);
            }
            // æ˜¾ç¤ºé¡µé¢ï¼ˆå–æ¶ˆåˆå§‹éšè—ï¼‰
            document.body.style.display = 'block';
        });

        // 1. æ¸²æŸ“éŸ³ä¹åˆ—è¡¨
        function renderMusicList() {
            if (localMusics.length === 0) {
                musicListEl.innerHTML = '<li class="empty-tip">æš‚æ— æœ¬åœ°éŸ³ä¹ï¼Œè¯·åœ¨JSä¸­é…ç½®</li>';
                return;
            }

            // æ¸…ç©ºåˆ—è¡¨åé‡æ–°æ¸²æŸ“
            musicListEl.innerHTML = '';
            localMusics.forEach((music, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span class="music-name">${music.title}</span>
                    <span class="music-duration">åŠ è½½ä¸­...</span>
                `;
                li.dataset.index = index;

                // ç‚¹å‡»åˆ—è¡¨é¡¹åˆ‡æ¢æ’­æ”¾å¯¹åº”éŸ³ä¹
                li.addEventListener('click', () => {
                    currentMusicIndex = index;
                    loadMusic(currentMusicIndex);
                    playMusic(); // ç‚¹å‡»åè‡ªåŠ¨æ’­æ”¾
                });

                musicListEl.appendChild(li);

                // æå‰è·å–éŸ³ä¹æ—¶é•¿å¹¶æ˜¾ç¤ºï¼ˆä¿®å¤æ—¶é•¿æ··ä¹±é—®é¢˜ï¼‰
                const tempAudio = new Audio(music.src);
                tempAudio.addEventListener('loadedmetadata', () => {
                    li.querySelector('.music-duration').textContent = formatTime(tempAudio.duration);
                });
            });

            // æ ‡è®°å½“å‰é€‰ä¸­çš„éŸ³ä¹
            updateMusicListActive(currentMusicIndex);
        }

        // 2. åŠ è½½æŒ‡å®šç´¢å¼•çš„éŸ³ä¹
        function loadMusic(index) {
            if (index < 0 || index >= localMusics.length) return;

            // åœæ­¢å½“å‰æ’­æ”¾ + æ¸…ç†æ—§çš„æ—¶é•¿ç›‘å¬ï¼ˆæ ¸å¿ƒä¿®å¤ï¼šé¿å…æ—¶é•¿æ··ä¹±ï¼‰
            audioElement.pause();
            if (durationListener) {
                audioElement.removeEventListener('loadedmetadata', durationListener);
            }

            // åŠ è½½æ–°éŸ³ä¹
            const currentMusic = localMusics[index];
            audioElement.src = currentMusic.src;

            // ç›‘å¬æ–°éŸ³ä¹çš„å…ƒæ•°æ®ï¼ˆè·å–æ€»æ—¶é•¿ï¼‰
            durationListener = function() {
                totalTimeDisplay.textContent = formatTime(audioElement.duration);
                // æ›´æ–°å½“å‰éŸ³ä¹åˆ—è¡¨é¡¹çš„æ—¶é•¿ï¼ˆç¡®ä¿æ˜¾ç¤ºæ­£ç¡®ï¼‰
                const currentLi = musicListEl.querySelector(`li[data-index="${index}"]`);
                if (currentLi) {
                    currentLi.querySelector('.music-duration').textContent = formatTime(audioElement.duration);
                }
            };
            audioElement.addEventListener('loadedmetadata', durationListener);

            // éŸ³ä¹åŠ è½½å¤±è´¥å¤„ç†
            audioElement.addEventListener('error', () => {
                webtools-static-lert(`ã€Š${currentMusic.title}ã€‹åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥éŸ³ä¹æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®`);
            });

            // æ›´æ–°åˆ—è¡¨é€‰ä¸­çŠ¶æ€
            updateMusicListActive(index);
        }

        // 3. æ’­æ”¾éŸ³ä¹
        function playMusic() {
            audioElement.play().then(() => {
                updatePlayBtnStatus(true); // åˆ‡æ¢æŒ‰é’®ä¸ºæš‚åœå›¾æ ‡ï¼ˆâ– ï¼‰
            }).catch(err => {
                console.error('æ’­æ”¾å¤±è´¥ï¼š', err);
                webtools-static-lert('æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥éŸ³ä¹æ–‡ä»¶æ˜¯å¦æ­£å¸¸');
            });
        }

        // 4. æš‚åœéŸ³ä¹
        function pauseMusic() {
            audioElement.pause();
            updatePlayBtnStatus(false); // åˆ‡æ¢æŒ‰é’®ä¸ºæ’­æ”¾å›¾æ ‡ï¼ˆâ–¶ï¼‰
        }

        // 5. æ’­æ”¾/æš‚åœæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        playBtn.addEventListener('click', () => {
            if (audioElement.paused) {
                playMusic();
            } else {
                pauseMusic();
            }
        });

        // 6. ä¸Šä¸€é¦–æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        prevBtn.addEventListener('click', () => {
            if (localMusics.length === 0) return;
            
            if (loopMode === 'random') {
                // éšæœºæ¨¡å¼ï¼šç”Ÿæˆä¸åŒäºå½“å‰çš„éšæœºç´¢å¼•
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * localMusics.length);
                } while (randomIndex === currentMusicIndex && localMusics.length > 1);
                currentMusicIndex = randomIndex;
            } else {
                // åˆ—è¡¨/å•æ›²æ¨¡å¼ï¼šä¸Šä¸€é¦–ï¼ˆå¾ªç¯åˆ°æœ€åä¸€é¦–ï¼‰
                currentMusicIndex = (currentMusicIndex - 1 + localMusics.length) % localMusics.length;
            }

            loadMusic(currentMusicIndex);
            playMusic();
        });

        // 7. ä¸‹ä¸€é¦–æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        nextBtn.addEventListener('click', () => {
            if (localMusics.length === 0) return;
            
            if (loopMode === 'random') {
                // éšæœºæ¨¡å¼ï¼šç”Ÿæˆä¸åŒäºå½“å‰çš„éšæœºç´¢å¼•
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * localMusics.length);
                } while (randomIndex === currentMusicIndex && localMusics.length > 1);
                currentMusicIndex = randomIndex;
            } else {
                // åˆ—è¡¨/å•æ›²æ¨¡å¼ï¼šä¸‹ä¸€é¦–ï¼ˆå¾ªç¯åˆ°ç¬¬ä¸€é¦–ï¼‰
                currentMusicIndex = (currentMusicIndex + 1) % localMusics.length;
            }

            loadMusic(currentMusicIndex);
            playMusic();
        });

        // 8. å¾ªç¯æ¨¡å¼åˆ‡æ¢ï¼ˆç‚¹å‡»å¾ªç¯æŒ‰é’®ï¼‰
        loopBtn.addEventListener('click', () => {
            switch (loopMode) {
                case 'list':
                    loopMode = 'single';
                    loopBtn.textContent = 'ğŸ”‚';
                    loopBtn.title = 'å½“å‰ï¼šå•æ›²å¾ªç¯ï¼Œç‚¹å‡»åˆ‡æ¢';
                    break;
                case 'single':
                    loopMode = 'random';
                    loopBtn.textContent = 'ğŸ”€';
                    loopBtn.title = 'å½“å‰ï¼šéšæœºæ’­æ”¾ï¼Œç‚¹å‡»åˆ‡æ¢';
                    break;
                case 'random':
                    loopMode = 'list';
                    loopBtn.textContent = 'ğŸ”„';
                    loopBtn.title = 'å½“å‰ï¼šåˆ—è¡¨å¾ªç¯ï¼Œç‚¹å‡»åˆ‡æ¢';
                    break;
            }
        });

        // 9. è¿›åº¦æ¡ç‚¹å‡»è·³è½¬
        progressContainer.addEventListener('click', (e) => {
            if (isNaN(audioElement.duration)) return; // éŸ³ä¹æœªåŠ è½½å®Œæˆæ—¶ä¸æ‰§è¡Œ
            const progressPercent = e.offsetX / progressContainer.offsetWidth;
            audioElement.currentTime = progressPercent * audioElement.duration;
        });

        // 10. å®æ—¶æ›´æ–°è¿›åº¦æ¡å’Œå½“å‰æ—¶é—´
        audioElement.addEventListener('timeupdate', () => {
            if (isNaN(audioElement.duration)) return;
            const progressPercent = (audioElement.currentTime / audioElement.duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            currentTimeDisplay.textContent = formatTime(audioElement.currentTime);
        });

        // 11. éŸ³ä¹æ’­æ”¾ç»“æŸè‡ªåŠ¨ä¸‹ä¸€é¦–
        audioElement.addEventListener('ended', () => {
            if (loopMode === 'single') {
                // å•æ›²å¾ªç¯ï¼šé‡æ–°æ’­æ”¾å½“å‰é¦–
                audioElement.currentTime = 0;
                playMusic();
            } else {
                // åˆ—è¡¨/éšæœºæ¨¡å¼ï¼šè‡ªåŠ¨ä¸‹ä¸€é¦–
                nextBtn.click();
            }
        });

        // å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¶é—´ï¼ˆç§’ â†’ åˆ†:ç§’ï¼Œè¡¥0ï¼‰
        function formatTime(seconds) {
            if (isNaN(seconds)) return '00:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // å·¥å…·å‡½æ•°ï¼šæ›´æ–°æ’­æ”¾æŒ‰é’®å›¾æ ‡
        function updatePlayBtnStatus(isPlaying) {
            playBtn.textContent = isPlaying ? 'â– ' : 'â–¶';
        }

        // å·¥å…·å‡½æ•°ï¼šæ›´æ–°éŸ³ä¹åˆ—è¡¨é€‰ä¸­çŠ¶æ€
        function updateMusicListActive(activeIndex) {
            musicListEl.querySelectorAll('li').forEach(li => {
                li.classList.remove('active');
                if (parseInt(li.dataset.index) === activeIndex) {
                    li.classList.add('active');
                }
            });
        }
    </script>  
 </body>
</html>
