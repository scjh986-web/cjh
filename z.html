<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³ä¹æ’­æ”¾å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, sans-serif;
        }
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #3a86ff 0%, #8338ec 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .player-title {
            color: #fff;
            font-size: 28px;
            margin-bottom: 25px;
            text-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        .music-container {
            width: 100%;
            max-width: 600px;
            min-height: 420px;
            background: #fff;
            border-radius: 24px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
            padding: 28px;
            display: flex;
            flex-direction: column;
        }
        .music-list {
            list-style: none;
            flex: 1;
            overflow-y: auto;
            margin-bottom: 22px;
            padding-right: 8px;
        }
        .music-list::-webkit-scrollbar {
            width: 8px;
        }
        .music-list::-webkit-scrollbar-track {
            background: #f5f5f5;
            border-radius: 4px;
        }
        .music-list::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        .music-item {
            padding: 14px 16px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        .music-item:hover {
            background: #f0f4f8;
            border-color: #d1d9e6;
            transform: translateX(3px);
        }
        .music-item.active {
            background: #e0f2fe;
            border-color: #38bdf8;
            color: #0284c7;
            font-weight: 500;
        }
        .music-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 70%;
            font-size: 16px;
        }
        .music-time {
            font-size: 14px;
            color: #666;
        }
        .player-controls {
            background: #f0f7ff;
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }
        .control-btns {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 28px;
        }
        .control-btn {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: none;
            background: #0284c7;
            color: #fff;
            font-size: 22px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(2, 132, 199, 0.2);
        }
        .control-btn:hover {
            background: #0369a1;
            transform: scale(1.08);
            box-shadow: 0 6px 12px rgba(2, 132, 199, 0.3);
        }
        .play-btn {
            width: 68px;
            height: 68px;
            font-size: 28px;
            background: #0369a1;
        }
        .progress-wrap {
            width: 100%;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e7ff;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }
        .progress-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0%;
            background: #0284c7;
            border-radius: 4px;
            transition: width 0.1s linear;
        }
        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #666;
            margin-top: 8px;
        }
        .back-home {
            display: block;
            margin-top: 30px;
            padding: 12px 24px;
            background: #fff;
            color: #0284c7;
            border-radius: 8px;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .back-home:hover {
            background: #f0f7ff;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .empty-tip {
            text-align: center;
            padding: 40px 0;
            color: #666;
            font-size: 18px;
            background: #f8f9fa;
            border-radius: 12px;
        }
    </style>
</head>
<body>
    <h1 class="player-title">éŸ³ä¹æ’­æ”¾å™¨</h1>
    <div class="music-container">
        <ul class="music-list" id="musicList"></ul>
        <div class="player-controls">
            <div class="control-btns">
                <button class="control-btn loop-btn" id="loopBtn" title="åˆ—è¡¨å¾ªç¯">ğŸ”„</button>
                <button class="control-btn prev-btn" id="prevBtn">â—€</button>
                <button class="control-btn play-btn" id="playBtn">â–¶</button>
                <button class="control-btn next-btn" id="nextBtn">â–¶</button>
            </div>
            <div class="progress-wrap">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">00:00</span>
                    <span id="totalTime">--:--</span>
                </div>
            </div>
        </div>
    </div>
    <a href="index.html" class="back-home">è¿”å›é¦–é¡µ</a>

    <script>
        // éŸ³ä¹æ•°æ®
        const musicListData = [
            { title: "å»æ‰¾ä½ å¦¹å¦¹å§", src: "https://audio.jukehost.co.uk/AiHrMeTcSKqe3hprNOOjZoopV53h2Nza" },
            { title: "Tikolin Purre(å®Œæ•´ç‰ˆ)", src: "https://audio.jukehost.co.uk/bNPUZLinSUeDbFBVG6BZtRGC3V6nRMj8" },
            { title: "å¼€å¾€æ˜¥å¤©çš„åœ°é“", src: "https://audio.jukehost.co.uk/xPF8kXt11lpdYjESuJ91G0aCs8DRRKg3" },
            { title: "å¯æˆ‘åªæ˜¯æµ·", src: "https://audio.jukehost.co.uk/p4Xz3DPvj7xZHCanTWfsSOiD9rXRMe8u" },
            { title: "æ‹äºº", src: "https://audio.jukehost.co.uk/CF2QDF8i69GmyoqkbjSXXNOJX432jHsO" },
            { title: "æˆ‘ç¦»å¼€äº†åŒ—æ–¹", src: "https://audio.jukehost.co.uk/7DU81TGOSSWtPzNkICGCzVGBVvnzX1dC" },
            { title: "çº¯éŸ³ä¹", src: "https://audio.jukehost.co.uk/CbxiQzllFo1JrlBEG6rGj5wETtQEXgfS" },
            { title: "è½¬èº«ç¦»å¼€", src: "https://audio.jukehost.co.uk/RnRY7SBMqYN7eKo5zm9ldPir0EtUuOf6" },
            { title: "4.55", src: "https://audio.jukehost.co.uk/qS1WdNgOymFDdoaG71E4MsHwIyTR9A5T" },
            { title: "Savage Love", src: "https://audio.jukehost.co.uk/4cpT2il2kiEAYqRPEgTuzo7m1DCLo8ZE" },
            { title: "æ²‰æºº", src: "https://audio.jukehost.co.uk/J20KmhLH9m66PThKiwXOEOcyJmcIg3VP" },
            { title: "æˆ‘å·²ç»ç‰µä½ æ‰‹", src: "https://audio.jukehost.co.uk/WjmKFTK3go3AXfnGXVmh4jSeYhGtK71h" },
            { title: "æ­¦å®¶å¡", src: "https://audio.jukehost.co.uk/rBQqWST2aQNn3fxAqNTRVy8DewVlc4Th" },
            { title: "å¿ƒå¦‚æ­¢æ°´", src: "https://audio.jukehost.co.uk/GqRYNrT2pkg7EYvcfcwjWCUfsGIDsMHz" },
            { title: "ç»ˆäº", src: "https://audio.jukehost.co.uk/8tomXKBfn17ebxmiBBGPgBnY6QniJd0P" },
            { title: "æ™´å¤©(ä»å‰æœ‰äººçˆ±ä½ å¾ˆä¹…)", src: "https://audio.jukehost.co.uk/b1iDoPgddrCxI89xAB5pwMnSMPEYwvU3" },
            { title: "æ­Œæ›²1", src: "https://audio.jukehost.co.uk/RTHgobHOJn2qxbljcktBXcmpDml2iWfg" },
            { title: "æ­Œæ›²2", src: "https://audio.jukehost.co.uk/JxFObG9UdNDICloJwP9LO5Ubt8wFQ4VO" },
        ];

        // DOMå…ƒç´ 
        const audio = new Audio();
        const musicList = document.getElementById('musicList');
        const playBtn = document.getElementById('playBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const loopBtn = document.getElementById('loopBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');

        // çŠ¶æ€å˜é‡
        let currentIndex = 0;
        let loopMode = 'list'; // list=åˆ—è¡¨å¾ªç¯, single=å•æ›²å¾ªç¯, random=éšæœºå¾ªç¯
        let isPlaying = false;

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.onload = function() {
            renderMusicList();
            loadMusic(currentIndex);
            bindAllEvents();
        };

        // 1. æ¸²æŸ“éŸ³ä¹åˆ—è¡¨
        function renderMusicList() {
            if (musicListData.length === 0) {
                musicList.innerHTML = '<li class="empty-tip">æš‚æ— éŸ³ä¹</li>';
                return;
            }

            musicList.innerHTML = '';
            musicListData.forEach((music, index) => {
                const li = document.createElement('li');
                li.className = `music-item ${index === currentIndex ? 'active' : ''}`;
                li.dataset.index = index;
                li.innerHTML = `
                    <span class="music-name">${music.title}</span>
                    <span class="music-time" id="time-${index}">--:--</span>
                `;
                // ç‚¹å‡»åˆ—è¡¨é¡¹æ’­æ”¾
                li.addEventListener('click', () => {
                    currentIndex = index;
                    loadMusic(currentIndex);
                    playMusic();
                });
                musicList.appendChild(li);

                // è·å–éŸ³ä¹æ—¶é•¿
                const tempAudio = new Audio(music.src);
                tempAudio.onloadedmetadata = function() {
                    document.getElementById(`time-${index}`).textContent = formatTime(tempAudio.duration);
                };
            });
        }

        // 2. åŠ è½½æŒ‡å®šéŸ³ä¹
        function loadMusic(index) {
            // é‡ç½®æ’­æ”¾çŠ¶æ€
            audio.pause();
            isPlaying = false;
            playBtn.textContent = 'â–¶';
            progressFill.style.width = '0%';
            currentTimeEl.textContent = '00:00';
            totalTimeEl.textContent = '--:--';

            // åŠ è½½éŸ³ä¹æº
            const targetMusic = musicListData[index];
            audio.src = targetMusic.src;

            // åŠ è½½å®Œæˆåæ›´æ–°æ€»æ—¶é•¿å’Œåˆ—è¡¨é€‰ä¸­çŠ¶æ€
            audio.onloadeddata = function() {
                if (!isNaN(audio.duration)) {
                    totalTimeEl.textContent = formatTime(audio.duration);
                }
                updateActiveItem(index);
            };

            // åŠ è½½å¤±è´¥å¤„ç†
            audio.onerror = function() {
                alert(`ã€Š${targetMusic.title}ã€‹åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥é“¾æ¥`);
                playNextMusic();
            };
        }

        // 3. æ’­æ”¾éŸ³ä¹
        function playMusic() {
            audio.play().then(() => {
                isPlaying = true;
                playBtn.textContent = 'â– ';
            }).catch(err => {
                console.error('æ’­æ”¾å¤±è´¥:', err);
                alert('æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨éŸ³é¢‘é™åˆ¶');
            });
        }

        // 4. æš‚åœéŸ³ä¹
        function pauseMusic() {
            audio.pause();
            isPlaying = false;
            playBtn.textContent = 'â–¶';
        }

        // 5. ä¸Šä¸€é¦–éŸ³ä¹
        function playPrevMusic() {
            if (loopMode === 'random') {
                // éšæœºå¾ªç¯ï¼šç”Ÿæˆä¸åŒäºå½“å‰çš„éšæœºç´¢å¼•
                let randomIdx;
                do {
                    randomIdx = Math.floor(Math.random() * musicListData.length);
                } while (randomIdx === currentIndex && musicListData.length > 1);
                currentIndex = randomIdx;
            } else {
                // åˆ—è¡¨/å•æ›²å¾ªç¯ï¼šæ­£å¸¸ä¸Šä¸€é¦–
                currentIndex = (currentIndex - 1 + musicListData.length) % musicListData.length;
            }
            loadMusic(currentIndex);
            playMusic();
        }

        // 6. ä¸‹ä¸€é¦–éŸ³ä¹
        function playNextMusic() {
            if (loopMode === 'random') {
                // éšæœºå¾ªç¯ï¼šç”Ÿæˆä¸åŒäºå½“å‰çš„éšæœºç´¢å¼•
                let randomIdx;
                do {
                    randomIdx = Math.floor(Math.random() * musicListData.length);
                } while (randomIdx === currentIndex && musicListData.length > 1);
                currentIndex = randomIdx;
            } else {
                // åˆ—è¡¨/å•æ›²å¾ªç¯ï¼šæ­£å¸¸ä¸‹ä¸€é¦–
                currentIndex = (currentIndex + 1) % musicListData.length;
            }
            loadMusic(currentIndex);
            playMusic();
        }

        // 7. åˆ‡æ¢å¾ªç¯æ¨¡å¼
        function toggleLoopMode() {
            switch (loopMode) {
                case 'list':
                    loopMode = 'single';
                    loopBtn.textContent = 'ğŸ”‚';
                    loopBtn.title = 'å•æ›²å¾ªç¯';
                    break;
                case 'single':
                    loopMode = 'random';
                    loopBtn.textContent = 'ğŸ”€';
                    loopBtn.title = 'éšæœºå¾ªç¯';
                    break;
                case 'random':
                    loopMode = 'list';
                    loopBtn.textContent = 'ğŸ”„';
                    loopBtn.title = 'åˆ—è¡¨å¾ªç¯';
                    break;
            }
        }

        // 8. éŸ³ä¹ç»“æŸå¤„ç†ï¼ˆæ ¸å¿ƒï¼šæ—¶é—´åœæ­¢æ—¶ç«‹å³æ‰§è¡Œå¾ªç¯ï¼‰
        function handleMusicEnd(){
            // å¼ºåˆ¶é‡ç½®å½“å‰æ—¶é—´ï¼ˆé¿å…æ—¶é—´åœç•™åœ¨ç»“æŸä½ç½®ï¼‰
            audio.currentTime = 0;
            // æ ¹æ®å½“å‰å¾ªç¯æ¨¡å¼æ‰§è¡Œå¯¹åº”é€»è¾‘ï¼Œæ— å»¶è¿Ÿç«‹å³è§¦å‘
            switch (loopMode) {
                case 'single':
                    // å•æ›²å¾ªç¯ï¼šç«‹å³é‡æ–°æ’­æ”¾å½“å‰æ­Œæ›²
                    playMusic();
                    break;
                case 'random':
                    // éšæœºå¾ªç¯ï¼šç«‹å³åŠ è½½å¹¶æ’­æ”¾éšæœºæ­Œæ›²
                    playNextMusic();
                    break;
                case 'list':
                    // åˆ—è¡¨å¾ªç¯ï¼šç«‹å³åŠ è½½å¹¶æ’­æ”¾ä¸‹ä¸€é¦–æ­Œæ›²
                    playNextMusic();
                    break;
            }
        }

        // 9. å®æ—¶æ ¡éªŒéŸ³ä¹æ˜¯å¦ç»“æŸï¼ˆåŒé‡ä¿éšœï¼šé˜²æ­¢åŸç”Ÿendedäº‹ä»¶æœªè§¦å‘ï¼‰
        function checkMusicEnd() {
            // å½“éŸ³ä¹å¤„äºæ’­æ”¾çŠ¶æ€ï¼Œä¸”å½“å‰æ—¶é—´æ¥è¿‘æ€»æ—¶é•¿ï¼ˆè¯¯å·®â‰¤0.1ç§’ï¼Œè§†ä¸ºæ—¶é—´åœæ­¢ï¼‰
            if (isPlaying && !isNaN(audio.duration) && audio.currentTime >= audio.duration - 0.1) {
                handleMusicEnd();
            }
        }

        // 10. æ›´æ–°åˆ—è¡¨é€‰ä¸­çŠ¶æ€
        function updateActiveItem(activeIndex) {
            document.querySelectorAll('.music-item').forEach((item, index) => {
                item.classList.toggle('active', index === activeIndex);
            });
        }

        // 11. æ—¶é—´æ ¼å¼åŒ–ï¼ˆç§’è½¬ "åˆ†:ç§’" æ ¼å¼ï¼‰
        function formatTime(seconds) {
            if (isNaN(seconds) || seconds < 0) return '--:--';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            // è¡¥é›¶ç¡®ä¿æ ¼å¼ç»Ÿä¸€ï¼ˆå¦‚ 1:2 â†’ 01:02ï¼‰
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // 12. ç»‘å®šæ‰€æœ‰äº¤äº’äº‹ä»¶
        function bindAllEvents() {
            // æ’­æ”¾/æš‚åœæŒ‰é’®
            playBtn.addEventListener('click', () => {
                isPlaying ? pauseMusic() : playMusic();
            });

            // ä¸Šä¸€é¦–æŒ‰é’®
            prevBtn.addEventListener('click', playPrevMusic);

            // ä¸‹ä¸€é¦–æŒ‰é’®
            nextBtn.addEventListener('click', playNextMusic);

            // å¾ªç¯æ¨¡å¼åˆ‡æ¢æŒ‰é’®
            loopBtn.addEventListener('click', toggleLoopMode);

            // è¿›åº¦æ¡ç‚¹å‡»è·³è½¬
            progressBar.addEventListener('click', (e) => {
                const clickRatio = e.offsetX / progressBar.offsetWidth;
                if (!isNaN(audio.duration)) {
                    // è®¡ç®—å¹¶è®¾ç½®ç›®æ ‡æ’­æ”¾æ—¶é—´
                    audio.currentTime = clickRatio * audio.duration;
                    // åŒæ­¥æ›´æ–°è¿›åº¦æ¡æ˜¾ç¤º
                    progressFill.style.width = `${clickRatio * 100}%`;
                }
            });

            // å®æ—¶æ›´æ–°è¿›åº¦æ¡å’Œå½“å‰æ—¶é—´ + æ ¡éªŒéŸ³ä¹æ˜¯å¦ç»“æŸ
            audio.addEventListener('timeupdate', () => {
                // æ›´æ–°å½“å‰æ’­æ”¾æ—¶é—´æ˜¾ç¤º
                currentTimeEl.textContent = formatTime(audio.currentTime);
                // åŒæ­¥æ›´æ–°è¿›åº¦æ¡å®½åº¦
                if (!isNaN(audio.duration)) {
                    const progressRatio = (audio.currentTime / audio.duration) * 100;
                    progressFill.style.width = `${progressRatio}%`;
                }
                // æ ¡éªŒéŸ³ä¹æ˜¯å¦å·²ç»“æŸï¼ˆæ—¶é—´åœæ­¢ï¼‰
                checkMusicEnd();
            });

            // åŸç”ŸéŸ³ä¹ç»“æŸäº‹ä»¶ï¼ˆç¬¬ä¸€å±‚ä¿éšœï¼‰
            audio.addEventListener('ended', handleMusicEnd);

            // ç›‘å¬éŸ³é¢‘æ’­æ”¾çŠ¶æ€å˜åŒ–ï¼ˆç¡®ä¿æŒ‰é’®æ˜¾ç¤ºä¸å®é™…çŠ¶æ€ä¸€è‡´ï¼‰
            audio.addEventListener('play', () => {
                isPlaying = true;
                playBtn.textContent = 'â– ';
            });
            audio.addEventListener('pause', () => {
                isPlaying = false;
                playBtn.textContent = 'â–¶';
            });
        }
    </script>
</body>
</html>