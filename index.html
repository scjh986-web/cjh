<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta id="dynamic-viewport" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>终端身份</title>
    <style id="base-style">
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        body, html { width: 100%; height: 100%; overflow: hidden; font-family: -apple-system, "SF Pro Display", "PingFang SC", sans-serif; background: #000; }
        #app { width: 100%; height: 100%; }
        
        /* 预加载微动画 */
        .loading-screen { height: 100%; display: flex; justify-content: center; align-items: center; background: #000; }
        .load-dot { width: 4px; height: 4px; background: #fff; border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.2; transform: scale(1); } 50% { opacity: 1; transform: scale(1.5); } }

        /* 统一按钮样式 */
        .btn-entry {
            padding: 18px 50px; border-radius: 100px; font-size: 15px; font-weight: 600;
            cursor: pointer; text-decoration: none; letter-spacing: 2px;
            background: #fff; color: #000; opacity: 0; transform: translateY(30px);
            box-shadow: 0 20px 50px rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>

    <div id="app">
        <div class="loading-screen">
            <div class="load-dot"></div>
        </div>
    </div>

    <script>
        // 你的跳转链接
        const TARGET_URL = "https://your-website.com"; 

        const ua = navigator.userAgent;
        const isMobile = /Android|iPhone|iPad/i.test(ua);

        // 核心规则执行：仅对手机端进行缩放限制
        if (isMobile) {
            // 修改 Viewport 标签限制缩放
            document.getElementById('dynamic-viewport').setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover');
            
            // 拦截多指触摸（双击缩放/双指张开）
            document.addEventListener('touchstart', (e) => {
                if (e.touches.length > 1) e.preventDefault();
            }, { passive: false });
            
            let lastTouchEnd = 0;
            document.addEventListener('touchend', (e) => {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) e.preventDefault(); // 禁止双击缩放
                lastTouchEnd = now;
            }, false);
        }

        // 设备分流渲染逻辑
        setTimeout(() => {
            if (isMobile) renderMobileFinal();
            else renderDesktopFinal();
        }, 1200);

        // ================= [ 手机端：锁定缩放 + 生长动画 ] =================
        async function renderMobileFinal() {
            let batText = "当前电量：获取中"; 
            if (navigator.getBattery) {
                const b = await navigator.getBattery();
                batText = `当前电量：${Math.floor(b.level * 100)}%`;
            }

            document.head.insertAdjacentHTML('beforeend', `
                <style>
                    .m-body { background: #000; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; overflow: hidden; touch-action: none; }
                    .m-glow { position: absolute; top: 0; width: 100%; height: 50%; background: radial-gradient(circle at 50% 0%, #1a1a2e 0%, #000 100%); opacity: 0.8; }
                    .m-status { position: absolute; top: 70px; font-size: 11px; color: rgba(255,255,255,0.3); letter-spacing: 3px; opacity: 0; transition: 1.5s 0.3s; }
                    .m-box { 
                        width: 135px; height: 135px; background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.01)); 
                        border-radius: 40px; border: 0.5px solid rgba(255,255,255,0.15); display: flex; justify-content: center; align-items: center; 
                        margin-bottom: 50px; opacity: 0; transform: scale(0.9) translateY(20px); transition: 1.5s 0.5s; z-index: 10; 
                    }
                    .m-icon-svg { width: 60px; stroke: #fff; stroke-width: 0.5px; fill: none; stroke-dasharray: 400; stroke-dashoffset: 400; }
                    .m-title { font-size: 56px; font-weight: 700; color: #fff; margin-bottom: 10px; opacity: 0; transform: translateY(30px); transition: 1.2s 0.8s; z-index: 10; letter-spacing: -2px; }
                    .m-tag { font-size: 12px; color: #818cf8; letter-spacing: 6px; margin-bottom: 80px; opacity: 0; transition: 1.2s 1.1s; z-index: 10; }
                    .ready .m-status, .ready .m-box, .ready .m-title, .ready .m-tag, .ready .btn-entry { opacity: 1; transform: none; }
                    .ready .btn-entry { transition: all 1.2s 1.5s cubic-bezier(0.2, 0.8, 0.2, 1); }
                    .ready .m-icon-svg { stroke-dashoffset: 0; transition: stroke-dashoffset 2.5s 0.8s ease-in-out; }
                </style>
            `);

            document.getElementById('app').innerHTML = `
                <div class="m-body" id="m-root">
                    <div class="m-glow"></div>
                    <div class="m-status">${batText}</div>
                    <div class="m-box">
                        <svg class="m-icon-svg" viewBox="0 0 24 24"><rect x="5" y="2" width="14" height="20" rx="3"/><path d="M12 18h.01"/></svg>
                    </div>
                    <h1 class="m-title">手机端</h1>
                    <p class="m-tag">已通过系统安全校验</p>
                    <a href="m.html" class="btn-entry">进入我的个人主页</a>
                </div>
            `;
            setTimeout(() => document.getElementById('m-root').classList.add('ready'), 50);
        }

        // ================= [ 电脑端：自由缩放 + 生长动画 ] =================
        function renderDesktopFinal() {
            document.head.insertAdjacentHTML('beforeend', `
                <style>
                    .d-body { background: #050505; height: 100vh; display: flex; align-items: center; justify-content: center; color: #fff; overflow-y: auto; }
                    .d-spot { position: absolute; width: 100%; height: 100%; background: radial-gradient(circle at center, #111 0%, #000 100%); z-index: 1; }
                    .d-card { width: 50vw; min-width: 800px; height: 60vh; z-index: 10; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 40px; display: flex; overflow: hidden; backdrop-filter: blur(40px); opacity: 0; transform: scale(0.95); transition: 1.5s cubic-bezier(0.16, 1, 0.3, 1); }
                    .d-left { flex: 1.1; display: flex; justify-content: center; align-items: center; background: rgba(255,255,255,0.01); border-right: 1px solid rgba(255,255,255,0.05); }
                    .d-right { flex: 1; display: flex; flex-direction: column; justify-content: center; padding: 60px; }
                    .d-icon-svg { width: 110px; stroke: rgba(255,255,255,0.8); stroke-width: 0.3px; fill: none; stroke-dasharray: 600; stroke-dashoffset: 600; }
                    .d-title { font-size: 68px; font-weight: 700; letter-spacing: -4px; margin-bottom: 10px; }
                    .d-sub { font-size: 15px; color: rgba(255,255,255,0.3); letter-spacing: 6px; margin-bottom: 60px; }
                    .ready .d-card { opacity: 1; transform: scale(1); }
                    .ready .d-icon-svg { stroke-dashoffset: 0; transition: stroke-dashoffset 3s 0.5s ease-in-out; }
                    .ready .btn-entry { opacity: 1; transform: translateY(0); transition: all 1s 1.2s; }
                </style>
            `);

            document.getElementById('app').innerHTML = `
                <div class="d-body" id="d-root">
                    <div class="d-spot"></div>
                    <div class="d-card">
                        <div class="d-left">
                            <svg class="d-icon-svg" viewBox="0 0 24 24"><rect x="2" y="4" width="20" height="12" rx="2"/><path d="M7 20h10M9 16l-1 4M15 16l1 4"/></svg>
                        </div>
                        <div class="d-right">
                            <h1 class="d-title">PC端</h1>
                            <p class="d-sub">DESKTOP SYSTEM</p>
                            <a href="p.html" class="btn-entry" style="width: fit-content;">进入我的个人主页</a>
                        </div>
                    </div>
                </div>
            `;
            setTimeout(() => document.getElementById('d-root').classList.add('ready'), 50);
        }
    </script>
</body>
</html>
