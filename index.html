<!DOCTYPE html>
<script src="weiyan1.js"></script>
<!-- 引入国庆轨迹彩蛋（所有页面通用，只需加这一行） -->
<script src="national-track.js"></script>
</body>
</body>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>引导页面</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
        }

        #click-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .skill-badge {
            position: fixed;
            top: 20px;
            right: -150px;
            background-color: #48dbfb;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(72, 219, 251, 0.3);
            transition: right 0.5s ease;
            z-index: 999;
            cursor: default;
        }

        .voice-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: #dcf8c6;
            border-radius: 18px;
            border-top-right-radius: 5px;
            padding: 8px 15px;
            margin: 15px auto 0;
            cursor: pointer;
            transition: background-color 0.3s ease;
            max-width: 300px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
        }
        .voice-btn::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%) rotate(20deg);
            width: 16px;
            height: 16px;
            background-color: #dcf8c6;
            border-radius: 0 0 50% 50%;
            clip-path: polygon(0 0, 100% 50%, 0 100%);
        }
        .voice-btn.playing {
            background-color: #c2e7b0;
        }
        .voice-btn.playing::after {
            background-color: #c2e7b0;
        }
        .voice-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .voice-icon.play::before {
            content: '';
            border-style: solid;
            border-width: 10px 0 10px 16px;
            border-color: transparent transparent transparent #07c160;
        }
        .voice-icon.pause::before,
        .voice-icon.pause::after {
            content: '';
            width: 6px;
            height: 16px;
            background-color: #07c160;
            display: inline-block;
        }
        .voice-icon.pause::after {
            margin-left: 4px;
        }
        .voice-text {
            font-size: 14px;
            color: #000;
            flex: 1;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .voice-countdown {
            font-size: 12px;
            color: #333;
            width: 60px;
            text-align: right;
            display: inline-block !important;
            opacity: 1 !important;
        }

        body {
            background-color: #f8f9fa; 
            background-image: url('https://picsum.photos/id/1048/1920/1080');
            background-blend-mode: soft-light;
            background-size: cover;
            background-attachment: fixed;
            color: #2d3436;
            padding: 20px;
            overflow-x: hidden;
            overflow-y: auto;
            transition: opacity 0.6s ease;
        }

        body.fade-to-music {
            opacity: 0;
        }

        /* 核心：响应式判断 - 显示框小（≤768px）用原纵向样式，显示框大（>768px）用你提供的横向样式 */
        .profile-container {
            max-width: 1200px;
            margin: 0 auto 30px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        /* 显示框小（≤768px）：原纵向样式 - 头像居中，名称/语音/简介依次在下 */
        @media (max-width: 768px) {
            .profile-inner {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 15px;
            }
            .avatar {
                width: clamp(70px, 18vw, 100px);
                height: clamp(70px, 18vw, 100px);
            }
            .avatar-tooltip {
                bottom: -30px;
            }
            .name {
                font-size: clamp(20px, 5vw, 28px);
                margin-bottom: 5px;
            }
            .brief {
                font-size: clamp(12px, 2.5vw, 14px);
                max-width: 90%;
                margin: 0 auto;
            }
        }

        /* 显示框大（>768px）：你提供的横向样式 - 头像居左，右侧名称/语音/简介纵向排列 */
        @media (min-width: 769px) {
            .profile-inner {
                display: flex;
                align-items: center;
                gap: 25px;
            }
            .avatar-wrapper {
                position: relative;
                padding-bottom: 35px; /* 给彩蛋文字留空间 */
            }
            .avatar {
                width: clamp(90px, 12vw, 130px);
                height: clamp(90px, 12vw, 130px);
            }
            .avatar-tooltip {
                bottom: -30px;
                left: 50%;
                transform: translateX(-50%);
            }
            .profile-info {
                flex: 1;
            }
            .name {
                font-size: clamp(24px, 4vw, 36px);
                margin-bottom: 10px;
            }
            .brief {
                font-size: clamp(13px, 2vw, 15px);
                margin-bottom: 15px;
            }
            .voice-btn {
                margin: 0; /* 横向样式中语音按钮居左，取消自动居中 */
            }
        }

        .avatar {
            border-radius: 50%;
            background: url('https://i1.qyimage.store/i/f5fb917dcd164265') center center no-repeat;
            background-size: cover;
            border: 2px dashed #48dbfb;
            cursor: pointer;
            transition: box-shadow 0.3s ease, transform 0.3s ease;
            position: relative;
        }
        .avatar:hover {
            box-shadow: 0 0 15px rgba(72, 219, 251, 0.5);
            transform: scale(1.03);
        }

        /* 头像彩蛋文字：确保两端都不被遮挡 */
        .avatar-tooltip {
            position: absolute;
            background-color: rgba(45, 52, 54, 0.9);
            color: white;
            padding: 5px 12px;
            border-radius: 4px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            white-space: nowrap;
            z-index: 10;
        }
        .avatar:hover .avatar-tooltip {
            opacity: 1;
        }

        .name {
            color: #2d3436;
            letter-spacing: 1.5px;
            text-shadow: 0 0 8px rgba(72, 219, 251, 0.3);
            transition: color 0.3s ease;
        }
        .name:hover {
            color: #48dbfb;
        }

        .brief {
            color: #636e72;
            line-height: 1.6;
            transition: color 0.3s ease;
        }
        .brief:hover {
            color: #48dbfb;
        }

        .section-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto 60px;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .section-card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            border: 1px solid transparent;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.03);
        }
        .section-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: #48dbfb;
            box-shadow: 0 8px 16px rgba(72, 219, 251, 0.15);
        }
        .section-card:active {
            transform: scale(0.98);
        }

        .section-icon {
            font-size: clamp(36px, 8vw, 56px);
            color: #1dd1a1;
            margin-bottom: 15px;
            transition: transform 0.3s ease, color 0.3s ease;
        }
        .section-card:hover .section-icon {
            color: #48dbfb;
        }
        #music-card:hover .section-icon {
            transform: rotate(15deg);
        }

        .section-title {
            font-size: clamp(18px, 4vw, 24px);
            color: #2d3436;
            margin-bottom: 10px;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        .section-card:hover .section-title {
            color: #48dbfb;
        }

        .section-desc {
            font-size: clamp(12px, 2vw, 14px);
            color: #636e72;
            line-height: 1.5;
            transition: color 0.3s ease;
        }
        .section-card:hover .section-desc {
            color: #333;
        }

        .works-subgrid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            transition: opacity 0.5s ease;
        }

        .work-card {
            background-color: rgba(241, 248, 248, 0.9);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        .work-card:hover {
            background-color: rgba(232, 245, 245, 0.9);
            transform: translateY(-3px);
            border-color: #48dbfb;
            box-shadow: 0 4px 12px rgba(72, 219, 251, 0.1);
        }

        .work-card h3 {
            color: #00cec9;
            margin-bottom: 8px;
            font-size: clamp(16px, 3vw, 18px);
            transition: color 0.3s ease;
        }
        .work-card:hover h3 {
            color: #48dbfb;
        }

        .work-card p {
            font-size: clamp(12px, 2vw, 14px);
            color: #636e72;
            transition: color 0.3s ease;
        }
        .work-card:hover p {
            color: #333;
        }

        .content-area {
            max-width: 1000px;
            width: 90%;
            margin: 40px auto;
            padding: clamp(20px, 5vw, 30px);
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            border: 1px solid #48dbfb;
            display: none;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.5s ease, transform 0.5s ease, border-color 0.3s ease, box-shadow 0.3s ease;
            max-height: none;
            overflow-y: visible;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .content-area.active {
            opacity: 1;
            transform: translateY(0);
        }
        .content-area.active:hover {
            border-color: #1dd1a1;
            box-shadow: 0 8px 20px rgba(72, 219, 251, 0.1);
        }
        .content-area.fade-out {
            opacity: 0;
            transform: translateY(30px);
        }

        .content-area h2 {
            color: #00cec9;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #48dbfb;
            font-size: clamp(20px, 4vw, 24px);
            transition: color 0.3s ease, border-color 0.3s ease;
        }
        .content-area:hover h2 {
            color: #48dbfb;
            border-color: #1dd1a1;
        }

        .content-area p, .content-area li {
            color: #2d3436;
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: clamp(13px, 2vw, 14px);
            transition: color 0.3s ease;
        }
        .content-area:hover p,
        .content-area:hover li {
            color: #1a365d;
        }

        .content-area ul {
            padding-left: 20px;
        }

        .content-area li strong {
            color: #1dd1a1;
            transition: color 0.3s ease;
        }
        .content-area:hover li strong {
            color: #48dbfb;
        }

        .back-btn {
            display: inline-block;
            margin-top: 20px;
            padding: clamp(8px, 2vw, 10px, 2vw, 10px) clamp(16px, 4vw, 20px);
            background-color: #48dbfb;
            color: white;
            border: 1px solid #48dbfb;
            border-radius: 6px;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: clamp(14px, 2vw, 16px);
            cursor: pointer;
        }
        .back-btn:hover {
            background-color: #00cec9;
            border-color: #00cec9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(72, 219, 251, 0.2);
        }
        .back-btn:active {
            transform: translateY(0);
        }

        /* 建议留言模块样式 */
        .suggest-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .form-group label {
            font-size: 14px;
            color: #48dbfb;
            font-weight: 500;
        }
        .form-group input,
        .form-group textarea {
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 6px;
            font-size: 14px;
            color: #333;
            background-color: #f9f9f9;
            transition: border-color 0.3s ease;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #48dbfb;
        }
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        /* 建议留言模块 - 提交给作者跳转按钮（已添加腾讯问卷链接，重点标记） */
        .suggest-jump-btn {
            display: inline-block;
            margin-top: 10px;
            padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px);
            background-color: #ffecb3; /* 黄色背景突出标记 */
            color: #e65100; /* 橙色文字增强辨识度 */
            border: 2px solid #e65100; /* 橙色边框强化标记 */
            border-radius: 6px;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: clamp(14px, 2vw, 16px);
            cursor: pointer;
            text-align: center;
            position: relative;
        }
        .suggest-jump-btn::before {
            content: "【提交给作者】";
            font-weight: bold;
            margin-right: 5px;
        }
        .suggest-jump-btn:hover {
            background-color: #ffe082;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(230, 81, 0, 0.2);
        }
        .suggest-jump-btn:active {
            transform: translateY(0);
        }
        /* 腾讯问卷链接特别标注：按钮下方添加文字提示 */
        .suggest-jump-note {
            font-size: 12px;
            color: #e65100;
            text-align: center;
            margin-top: 5px;
            font-weight: 500;
        }
        .suggest-list {
            margin-top: 20px;
        }
        .suggest-item {
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid #48dbfb;
        }
        .suggest-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            color: #666;
        }
        .suggest-content {
            font-size: 14px;
            color: #333;
            line-height: 1.5;
        }

        /* 访问计数器样式 */
        .visit-counter {
            max-width: 1200px;
            margin: 20px auto;
            padding: 15px 20px;
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 8px;
            text-align: center;
            font-size: 14px;
            color: #666;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        /* 底部备案信息样式 */
        .footer-record {
            width: 100%;
            margin-top: 30px;
            padding: 20px;
            background-color: #f5f5f5;
            border-top: 1px solid #eee;
            text-align: center;
        }
        .record-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #666;
            text-decoration: none;
            margin: 0 10px;
            cursor: default;
            pointer-events: none;
        }
        .record-link:hover {
            color: #666;
        }
        .record-icon {
            width: 18px;
            height: 18px;
            background-color: #48dbfb;
            border-radius: 2px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s ease forwards;
        }

        .profile-container {
            animation-delay: 0.1s;
        }

        .section-grid > .section-card:nth-child(1) {
            animation-delay: 0.2s;
        }

        .section-grid > .section-card:nth-child(2) {
            animation-delay: 0.3s;
        }

        .section-grid > .section-card:nth-child(3) {
            animation-delay: 0.4s;
        }

        .section-grid > .section-card:nth-child(4) {
            animation-delay: 0.5s;
        }

        .section-grid > .section-card:nth-child(5) {
            animation-delay: 0.6s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media all and (-webkit-min-device-pixel-ratio: 1) and (max-device-width: 1080px) {
            .voice-countdown {
                width: 60px !important;
            }
            .voice-btn {
                max-width: 300px !important;
                padding: 8px 12px !important;
            }
            .voice-text {
                font-size: 13px !important;
            }
            .voice-btn::after {
                clip-path: none;
                transform: translateY(-50%) rotate(20deg) skewX(20deg);
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            .section-card {
                padding: 20px 15px;
            }
            .works-subgrid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="skill-badge" id="skillBadge">✨ 技能大师已解锁 ✨</div>
    <div id="click-effects"></div>

    <!-- 响应式头像区域：小显示框纵向，大显示框横向 -->
    <div class="profile-container fade-in">
        <div class="profile-inner">
            <div class="avatar-wrapper">
                <div class="avatar" id="avatar">
                    <div class="avatar-tooltip">点击三次有惊喜哦～</div>
                </div>
            </div>
            <div class="profile-info">
                <h1 class="name" id="userName">程佳辉</h1>
                <p class="brief">16岁在读高中生，自学编程有股钻劲，用代码玩出创意🔥</p>
                <div class="voice-btn" id="voiceBtn">
                    <div class="voice-icon play" id="voiceIcon"></div>
                    <div class="voice-text">点击收听高一必备琵琶行</div>
                    <div class="voice-countdown" id="voiceCountdown">00:05</div>
                </div>
            </div>
        </div>
    </div>

    <div class="section-grid">
        <div class="section-card fade-in" data-target="about">
            <div class="section-icon">📸</div>
            <h2 class="section-title">关于我</h2>
            <p class="section-desc">性格、价值观与生活态度</p>
        </div>
        <div class="section-card fade-in" data-target="works">
            <div class="section-icon">💻</div>
            <h2 class="section-title">作品</h2>
            <p class="section-desc">我的代码小项目</p>
        </div>
        <div class="section-card fade-in" data-target="contact">
            <div class="section-icon">✉️</div>
            <h2 class="section-title">联系</h2>
            <p class="section-desc">社交账号与联系方式</p>
        </div>
        <div class="section-card fade-in" data-target="skills" id="skillsCard">
            <div class="section-icon">⚡</div>
            <h2 class="section-title">技能</h2>
            <p class="section-desc">技术能力与工具掌握</p>
        </div>
        <div class="section-card fade-in" data-target="suggest">
            <div class="section-icon">💡</div>
            <h2 class="section-title">建议留言</h2>
            <p class="section-desc">留下你的想法或建议</p>
        </div>
        <div class="section-card fade-in" id="music-card">
            <div class="section-icon">🎵</div>
            <h2 class="section-title">音乐</h2>
            <p class="section-desc">我的专属音乐页面</p>
        </div>
    </div>

    <div id="about" class="content-area">
        <h2>关于我</h2>
        <p>我踏实肯干，对编程有股钻劲，遇到问题不轻易放弃。做事追求实在，开发产品总想着让用户用得顺手。生活里爱观察、爱琢磨，相信点滴积累的力量，用真诚态度对待每一次尝试，在探索中慢慢成长。</p>
        <p>性格外向但不失沉稳，既能快速融入团队协作，也能独立承担核心任务。空闲时喜欢研究新的编程技巧，偶尔也会剪辑短视频记录生活。</p>
        <button class="back-btn" onclick="history.back()">返回首页</button>
    </div>

    <div id="works" class="content-area">
        <h2>作品</h2>
        <p>以下是我的作品分类，点击可跳转至对应内容：</p>
        <div class="works-subgrid">
            <div class="work-card" onclick="window.location.href='c.html'">
                <h3>倒数日</h3>
                <p>本产品有专用软件，可在联系方式中添加作者获取</p>
            </div>
            <div class="work-card" onclick="window.location.href='j.html'">
                <h3>待添加</h3>
                <p>作品内容描述</p>
            </div>
            <div class="work-card" onclick="window.location.href='j.html'">
                <h3>待添加</h3>
                <p>作品内容描述</p>
            </div>
            <div class="work-card" onclick="window.location.href='j.html'">
                <h3>待添加</h3>
                <p>作品内容描述</p>
            </div>
        </div>
        <button class="back-btn" onclick="history.back()">返回首页</button>
    </div>

    <div id="contact" class="content-area">
        <h2>联系</h2>
        <p>微信: chengjiahuicjh254</p>
        <p>QQ: 2318879010 或 3074702258</p>
        <p>邮箱: 3074702258@qq.com</p>
        <button class="back-btn" onclick="history.back()">返回首页</button>
    </div>

    <div id="skills" class="content-area">
        <h2>技能</h2>
        <ul>
            <li><strong>核心技能</strong>: 辅助编写或修改软件代码</li>
            <li><strong>辅助技能</strong>：UI设计基础、HTML、短视频剪辑</li>
            <li><strong>工具掌握</strong>: 会使用WebCat、AndLua+等编辑软件</li>
        </ul>
        <button class="back-btn" onclick="history.back()">返回首页</button>
    </div>

    <!-- 建议留言模块（提交给作者按钮已添加腾讯问卷链接，并特别标注） -->
    <div id="suggest" class="content-area">
        <h2>建议留言</h2>
        <p>如果有好的想法或建议，欢迎留下你的反馈～</p>
        <!-- 留言表单 -->
        <form class="suggest-form" id="suggestForm">
            <div class="form-group">
                <label for="nickname">你的昵称</label>
                <input type="text" id="nickname" placeholder="请输入昵称（必填）" required>
            </div>
            <div class="form-group">
                <label for="content">留言内容</label>
                <textarea id="content" placeholder="请输入你的建议或想法（必填）" required></textarea>
            </div>
            <!-- 普通提交按钮 -->
            <button type="submit" class="back-btn">提交留言（本地存储）</button>
            <!-- 👇 重点标记：提交给作者按钮（已绑定你的腾讯问卷链接） -->
            <button type="button" class="suggest-jump-btn" onclick="window.location.href='https://wj.qq.com/s2/24102021/c843/'">跳转至问卷</button>
            <!-- 腾讯问卷链接特别标注提示 -->
            <p class="suggest-jump-note">注：点击上方按钮将跳转至「腾讯问卷」提交意见</p>
        </form>
        <!-- 留言列表 -->
        <div class="suggest-list" id="suggestList">
            <!-- 留言会通过JS动态渲染 -->
        </div>
        <button class="back-btn" onclick="history.back()">返回首页</button>
    </div>

    <!-- 访问计数器 -->
    <div class="visit-counter" id="visitCounter">
        本页已被访问 <span style="color: #48dbfb; font-weight: 600;">0</span> 次（仅当前设备统计）
    </div>

    <!-- 底部备案信息 -->
    <div class="footer-record">
        <span class="record-link">
            <span class="record-icon">备</span>
            陕ICP备10131102号-1
        </span>
        <span class="record-link">
            <span class="record-icon">公</span>
            陕公安备61016220251220号
        </span>
        <p style="margin-top: 10px; font-size: 12px; color: #999;">© 2025 程佳辉 版权所有</p>
    </div>

    <script>
        // 点击火花特效
        var clickEffects = document.getElementById('click-effects');
        document.addEventListener('click', function(e) {
            var spark = document.createElement('div');
            var colors = ['#48dbfb', '#1dd1a1'];
            var randomColor = colors[Math.floor(Math.random() * colors.length)];
            spark.style.position = 'absolute';
            spark.style.left = e.clientX + 'px';
            spark.style.top = e.clientY + 'px';
            spark.style.width = Math.random() * 10 + 5 + 'px';
            spark.style.height = Math.random() * 10 + 5 + 'px';
            spark.style.backgroundColor = randomColor;
            spark.style.borderRadius = '50%';
            spark.style.transform = 'translate(-50%, -50%)';
            spark.style.opacity = '1';
            spark.style.transition = 'opacity 1s ease, transform 1s ease';
            var angle = Math.random() * Math.PI * 2;
            var distance = Math.random() * 20 + 10;
            spark.style.transform = 'translate(-50%, -50%) translate(' + 
                Math.cos(angle) * distance + 'px, ' + 
                Math.sin(angle) * distance + 'px)';
            spark.style.opacity = '0';
            clickEffects.appendChild(spark);
            setTimeout(function() {
                clickEffects.removeChild(spark);
            }, 1000);
        });

        // 头像三次点击跳转
        var avatar = document.getElementById('avatar');
        var clickCount = 0;
        var clickTimer = null;
        var targetUrl = "a.html";
        avatar.addEventListener('click', function() {
            clickCount++;
            clearTimeout(clickTimer);
            clickTimer = setTimeout(function() {
                clickCount = 0;
            }, 3000);
            if (clickCount === 3) {
                avatar.style.transform = "scale(0.95)";
                setTimeout(function() {
                    avatar.style.transform = "scale(1)";
                }, 100);
                setTimeout(function() {
                    window.location.href = targetUrl;
                }, 150);
                clickCount = 0;
            }
        });

        // 音乐板块过渡动画
        var musicCard = document.getElementById('music-card');
        var musicTargetUrl = 'm.html';
        musicCard.addEventListener('click', function() {
            musicCard.style.transform = 'scale(0.95)';
            setTimeout(function() {
                document.body.classList.add('fade-to-music');
            }, 150);
            setTimeout(function() {
                window.location.href = musicTargetUrl;
            }, 750);
        });

        // 页面状态控制（无滑动限制）
        var pageStates = { home: 'home', about: 'about', skills: 'skills', works: 'works', contact: 'contact', suggest: 'suggest' };
        var currentState = pageStates.home;
        var profileContainer = document.querySelector('.profile-container');
        var sectionGrid = document.querySelector('.section-grid');
        var sections = document.querySelectorAll('.content-area');
        var cards = document.querySelectorAll('.section-card[data-target]');
        var skillBadge = document.getElementById('skillBadge');
        history.replaceState({ state: pageStates.home }, '首页');

        function showState(state) {
            if (state === pageStates.home && currentState !== pageStates.home) {
                var currentSection = document.getElementById(currentState);
                if (currentSection) {
                    currentSection.classList.add('fade-out');
                    setTimeout(function() {
                        currentSection.style.display = 'none';
                        currentSection.classList.remove('active', 'fade-out');
                        profileContainer.style.display = 'block';
                        sectionGrid.style.display = 'grid';
                        setTimeout(function() {
                            profileContainer.classList.add('fade-in');
                            sectionGrid.classList.add('fade-in');
                        }, 10);
                        currentState = state;
                    }, 300);
                    return;
                }
            }

            if (state === pageStates.skills) {
                setTimeout(function() {
                    skillBadge.style.right = '20px';
                    setTimeout(function() {
                        skillBadge.style.right = '-150px';
                    }, 3000);
                }, 600);
            }

            profileContainer.classList.remove('fade-in');
            sectionGrid.classList.remove('fade-in');
            setTimeout(function() {
                profileContainer.style.display = 'none';
                sectionGrid.style.display = 'none';
                sections.forEach(function(section) {
                    section.style.display = 'none';
                    section.classList.remove('active', 'fade-out');
                });

                if (state === pageStates.home) {
                    profileContainer.style.display = 'block';
                    sectionGrid.style.display = 'grid';
                    setTimeout(function() {
                        profileContainer.classList.add('fade-in');
                        sectionGrid.classList.add('fade-in');
                    }, 10);
                } else {
                    var targetSection = document.getElementById(state);
                    targetSection.style.display = 'block';
                    setTimeout(function() {
                        targetSection.classList.add('active');
                    }, 10);
                }
                currentState = state;
            }, 300);
        }

        // 功能卡片点击事件
        cards.forEach(function(card) {
            card.addEventListener('click', function() {
                var targetState = card.getAttribute('data-target');
                showState(targetState);
                history.pushState({ state: targetState }, targetState, '#' + targetState);
            });
        });

        // 浏览器后退/前进监听
        window.addEventListener('popstate', function(e) {
            if (e.state && e.state.state) {
                showState(e.state.state);
                if (e.state.state === pageStates.skills) {
                    setTimeout(function() {
                        skillBadge.style.right = '20px';
                        setTimeout(function() {
                            skillBadge.style.right = '-150px';
                        }, 3000);
                    }, 600);
                }
            } else {
                showState(pageStates.home);
            }
        });

        // 页面加载时触发
        window.addEventListener('DOMContentLoaded', function() {
            var hash = window.location.hash.substring(1);
            if (hash && Object.values(pageStates).indexOf(hash) !== -1) {
                showState(hash);
                history.replaceState({ state: hash }, hash, '#' + hash);
                if (hash === pageStates.skills) {
                    setTimeout(function() {
                        skillBadge.style.right = '20px';
                        setTimeout(function() {
                            skillBadge.style.right = '-150px';
                        }, 3000);
                    }, 600);
                }
            }

            // 初始化访问计数器
            initVisitCounter();
            // 初始化建议留言列表
            initSuggestList();
        });

        // 名字hover变色
        var userName = document.getElementById('userName');
        var nameColors = ['#48dbfb', '#1dd1a1', '#00cec9'];
        var colorIndex = 0;
        userName.addEventListener('mouseenter', function() {
            userName.style.color = nameColors[colorIndex];
            colorIndex = (colorIndex + 1) % nameColors.length;
        });
        userName.addEventListener('mouseleave', function() {
            userName.style.color = '#2d3436';
        });

        // 音乐播放功能（绑定你的音频链接）
        var voiceBtn = document.getElementById('voiceBtn');
        var voiceIcon = document.getElementById('voiceIcon');
        var voiceCountdown = document.getElementById('voiceCountdown');
        var audio = new Audio();
        audio.src = 'https://audio.jukehost.co.uk/nJJyT1gQ6gmHQpFLrv2RmvMEjsm2CNa6';
        var isPlaying = false;
        var timeUpdateTimer = null;
        var totalDuration = 326; // 可根据音频实际时长修改
        var currentTime = 0;

        function formatTime(seconds) {
            seconds = Math.max(0, Math.floor(seconds));
            var min = Math.floor(seconds / 60);
            var sec = seconds % 60;
            return `${min < 10 ? '0' + min : min}:${sec < 10 ? '0' + sec : sec}`;
        }

        voiceCountdown.textContent = formatTime(totalDuration);

        voiceBtn.addEventListener('click', function() {
            if (isPlaying) {
                audio.pause();
                clearInterval(timeUpdateTimer);
                voiceIcon.classList.remove('pause');
                voiceIcon.classList.add('play');
                voiceBtn.classList.remove('playing');
            } else {
                audio.play().then(function() {
                    voiceIcon.classList.remove('play');
                    voiceIcon.classList.add('pause');
                    voiceBtn.classList.add('playing');
                    currentTime = 0;
                    timeUpdateTimer = setInterval(function() {
                        currentTime += 0.3;
                        var remainingTime = totalDuration - currentTime;
                        if (remainingTime <= 0) {
                            clearInterval(timeUpdateTimer);
                            audio.pause();
                            voiceIcon.classList.remove('pause');
                            voiceIcon.classList.add('play');
                            voiceBtn.classList.remove('playing');
                            voiceCountdown.textContent = formatTime(totalDuration);
                            return;
                        }
                        voiceCountdown.textContent = formatTime(remainingTime);
                    }, 300);
                }).catch(function(err) {
                    alert('当前音频文件类型不支持播放，请联系作者');
                });
            }
            isPlaying = !isPlaying;
        });

        document.body.addEventListener('click', function() {
            if (!isPlaying && audio.paused) {
                audio.load().catch(function() {});
            }
        }, { once: true });

        // 访问计数器逻辑（localStorage存储）
        function initVisitCounter() {
            var counterKey = 'pageVisitCount';
            var visitCount = localStorage.getItem(counterKey) ? parseInt(localStorage.getItem(counterKey)) : 0;
            visitCount++;
            localStorage.setItem(counterKey, visitCount);
            document.querySelector('#visitCounter span').textContent = visitCount;
        }

        // 建议留言逻辑（localStorage存储）
        function initSuggestList() {
            var suggestForm = document.getElementById('suggestForm');
            var suggestList = document.getElementById('suggestList');
            var suggestKey = 'pageSuggestions';

            function renderSuggestions() {
                var suggestions = localStorage.getItem(suggestKey) ? JSON.parse(localStorage.getItem(suggestKey)) : [];
                if (suggestions.length === 0) {
                    suggestList.innerHTML = '<p style="text-align:center; color:#999; margin-top:10px;">暂无留言，快来留下你的想法吧～</p>';
                    return;
                }
                var html = '';
                suggestions.reverse().forEach(function(item) {
                    html += `
                        <div class="suggest-item">
                            <div class="suggest-header">
                                <span>昵称：${item.nickname}</span>
                                <span>时间：${item.time}</span>
                            </div>
                            <div class="suggest-content">${item.content}</div>
                        </div>
                    `;
                });
                suggestList.innerHTML = html;
            }

            suggestForm.addEventListener('submit', function(e) {
                e.preventDefault();
                var nickname = document.getElementById('nickname').value.trim();
                var content = document.getElementById('content').value.trim();
                if (!nickname || !content) return;

                var now = new Date();
                var timeStr = `${now.getFullYear()}-${(now.getMonth()+1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;

                var suggestions = localStorage.getItem(suggestKey) ? JSON.parse(localStorage.getItem(suggestKey)) : [];
                suggestions.push({ nickname: nickname, content: content, time: timeStr });
                localStorage.setItem(suggestKey, JSON.stringify(suggestions));

                suggestForm.reset();
                renderSuggestions();
            });

            renderSuggestions();
        }
    </script>
</body>
</html>